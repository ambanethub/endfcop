databaseChangeLog:
  - changeSet:
      id: 1-create-users
      author: syss
      changes:
        - createTable:
            tableName: users
            columns:
              - column: { name: id, type: BIGSERIAL, constraints: { primaryKey: true }}
              - column: { name: username, type: VARCHAR(100), constraints: { nullable: false, unique: true }}
              - column: { name: password_hash, type: VARCHAR(255), constraints: { nullable: false }}
              - column: { name: role, type: VARCHAR(32), constraints: { nullable: false }}
              - column: { name: unit_id, type: VARCHAR(64) }
              - column: { name: totp_secret, type: VARCHAR(255) }
              - column: { name: two_factor_enabled, type: BOOLEAN, defaultValueBoolean: false }
  - changeSet:
      id: 2-seed-users
      author: syss
      changes:
        - insert:
            tableName: users
            columns:
              - column: { name: username, value: "admin" }
              - column: { name: password_hash, value: "$2b$10$yWfQZ5Jc2d2k3mSS3s4rBe6wqKh8DkqKj2R2H9oJtJ6lG3l7yqEwK" }
              - column: { name: role, value: "ADMIN" }
        - insert:
            tableName: users
            columns:
              - column: { name: username, value: "commander" }
              - column: { name: password_hash, value: "$2b$10$yWfQZ5Jc2d2k3mSS3s4rBe6wqKh8DkqKj2R2H9oJtJ6lG3l7yqEwK" }
              - column: { name: role, value: "COMMANDER" }